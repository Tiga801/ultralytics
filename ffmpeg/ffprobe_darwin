#!/bin/bash
# Mac系统FFprobe包装脚本 (ARM64)
# 自动检测并使用系统FFprobe

# 查找FFprobe路径
FFPROBE_PATHS=(
    "/usr/local/bin/ffprobe"
    "/opt/homebrew/bin/ffprobe"
    "/usr/bin/ffprobe"
    "$(which ffprobe 2>/dev/null)"
)

FFPROBE_CMD=""
for path in "${FFPROBE_PATHS[@]}"; do
    if [ -x "$path" ]; then
        FFPROBE_CMD="$path"
        break
    fi
done

if [ -z "$FFPROBE_CMD" ]; then
    echo "❌ 错误: 未找到FFprobe，请先安装FFmpeg"
    echo "安装命令: brew install ffmpeg"
    exit 1
fi

# 执行FFprobe命令
exec "$FFPROBE_CMD" "$@"
